{% extends "layouts/base.html" %}

{% block title %}New Site - RustPress{% endblock %}

{% block header %}
{% include "partials/nav_admin.html" %}
{% endblock %}

{% block content %}
<div class="max-w-2xl">
  <div class="mb-6">
    <h1 class="mb-2">Create New Site</h1>
    <p class="text-rp-muted">Set up a new site with its own configuration.</p>
  </div>

  {% if error.is_some() %}
    <div class="notice notice-error mb-4">
      <p class="m-0">{{ error.as_ref().unwrap() }}</p>
    </div>
  {% endif %}

  <div class="card p-5">
    <form method="post" action="/admin/sites" hx-post="/admin/sites" hx-trigger="submit" hx-swap="none">
      <label>
        Site Name
        <input name="name" required placeholder="My Blog" />
      </label>

      <label>
        Slug
        <input name="slug" required placeholder="my-blog" />
        <p class="text-rp-muted text-sm mt-1">URL-friendly identifier for your site.</p>
      </label>

      <label>
        Default Template
        <select name="default_template">
          {% for t in templates %}
            <option value="{{ t.name }}" {% if t.name == default_template %}selected{% endif %}>{{ t.name }}{% if t.is_builtin %} (built-in){% endif %}</option>
          {% endfor %}
        </select>
      </label>

      <div class="flex items-center gap-3 mt-6">
        <button class="btn-primary" type="submit">Create Site</button>
        <a class="btn-secondary" href="/admin/sites">Cancel</a>
      </div>
    </form>
  </div>
</div>
{% endblock %}
