{% extends "layouts/base.html" %}

{% block title %}Posts - RustPress{% endblock %}

{% block header %}
{% include "partials/nav_admin.html" %}
{% endblock %}

{% block content %}
<div class="flex items-center justify-between mb-6">
  <div>
    <h1 class="mb-2">Posts</h1>
    <p class="text-rp-muted">Manage your blog posts.</p>
  </div>
  <a class="btn-primary" href="/admin/posts/new">New Post</a>
</div>

<!-- Search -->
<div class="card p-4 mb-6">
  <form method="get" action="/admin/posts" class="flex gap-3 items-end">
    <label class="flex-1 mb-0">
      Search
      <input name="q" value="{{ query }}" placeholder="Search by title..." />
    </label>
    <button class="btn-primary" type="submit">Search</button>
    <a class="btn-secondary" href="/admin/posts">Clear</a>
  </form>
</div>

<!-- Posts List -->
<div class="card">
  {% if posts.len() == 0 %}
    <div class="p-8 text-center">
      <p class="text-rp-muted mb-4">No posts found.</p>
      <a class="btn-primary" href="/admin/posts/new">Create your first post</a>
    </div>
  {% else %}
    <ul class="divide-y divide-rp-border">
      {% for p in posts %}
        <li class="p-4 flex items-center justify-between hover:bg-rp-bg/50">
          <div>
            <a href="/admin/edit/{{ p.id }}" class="font-medium">{{ p.title }}</a>
            <p class="text-rp-muted text-sm">/{{ p.slug }}</p>
          </div>
          <span class="badge {% if p.status == "published" %}badge-success{% endif %}">{{ p.status }}</span>
        </li>
      {% endfor %}
    </ul>
  {% endif %}
</div>
{% endblock %}
