{% extends "layouts/base.html" %}

{% block title %}Sites - RustPress{% endblock %}

{% block header %}
{% include "partials/nav_admin.html" %}
{% endblock %}

{% block content %}
<div class="flex items-center justify-between mb-6">
  <div>
    <h1 class="mb-2">Sites</h1>
    <p class="text-rp-muted">Manage your sites and their settings.</p>
  </div>
  <a class="btn-primary" href="/admin/sites/new">Add New Site</a>
</div>

<!-- Search -->
<div class="card p-4 mb-6">
  <form method="get" action="/admin/sites" class="flex gap-3 items-end">
    <label class="flex-1 mb-0">
      Search
      <input name="q" value="{{ query }}" placeholder="Search by name or slug..." />
    </label>
    <button class="btn-primary" type="submit">Search</button>
    <a class="btn-secondary" href="/admin/sites">Clear</a>
  </form>
</div>

<!-- Sites List -->
<div class="card">
  {% if sites.len() == 0 %}
    <div class="p-8 text-center">
      <p class="text-rp-muted mb-4">No sites found.</p>
      <a class="btn-primary" href="/admin/sites/new">Create your first site</a>
    </div>
  {% else %}
    <ul class="divide-y divide-rp-border">
      {% for s in sites %}
        <li class="p-4 flex items-center justify-between hover:bg-rp-bg/50">
          <div>
            <a href="/admin/sites/{{ s.id }}" class="font-medium">{{ s.name }}</a>
            <p class="text-rp-muted text-sm">/{{ s.slug }} &middot; Theme: {{ s.default_template }}</p>
          </div>
          <span class="badge {% if s.status == "published" %}badge-success{% endif %}">{{ s.status }}</span>
        </li>
      {% endfor %}
    </ul>
  {% endif %}
</div>
{% endblock %}
