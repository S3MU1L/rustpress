{% macro back_button() %}
<a class="p-2 rounded-lg text-rp-muted hover:text-rp-text hover:bg-rp-border/30 transition-colors" href="/admin"
  title="Back to Dashboard">
  <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
  </svg>
</a>
{% endmacro %}

{% macro settings_row(slug_value, slug_required, template_value, show_status, status_value) %}
<div class="flex flex-wrap items-center gap-4">
  <label class="flex items-center gap-2">
    <span class="text-sm font-medium text-rp-text whitespace-nowrap">Slug:</span>
    <input id="slug" name="slug" value="{{ slug_value }}" {% if slug_required %}required{% endif %}
      placeholder="url-friendly-slug"
      class="px-3 py-2 text-sm rounded-lg border border-rp-border bg-white focus:outline-none focus:ring-2 focus:ring-rp-primary/50 w-64" />
  </label>
  <label class="flex items-center gap-2">
    <span class="text-sm font-medium text-rp-text whitespace-nowrap">Template:</span>
    <select name="template"
      class="px-3 py-2 text-sm rounded-lg border border-rp-border bg-white focus:outline-none focus:ring-2 focus:ring-rp-primary/50 w-40">
      {% for t in templates %}
      {% if t.name.as_str() == template_value %}
      <option value="{{ t.name }}" selected>{{ t.name }}</option>
      {% else %}
      <option value="{{ t.name }}">{{ t.name }}</option>
      {% endif %}
      {% endfor %}
    </select>
  </label>
  {% if show_status %}
  <label class="flex items-center gap-2">
    <span class="text-sm font-medium text-rp-text whitespace-nowrap">Status:</span>
    <select name="status"
      class="px-3 py-2 text-sm rounded-lg border border-rp-border bg-white focus:outline-none focus:ring-2 focus:ring-rp-primary/50 w-32">
      {% if status_value == "draft" %}
      <option value="draft" selected>Draft</option>
      <option value="published">Published</option>
      {% else %}
      <option value="draft">Draft</option>
      <option value="published" selected>Published</option>
      {% endif %}
    </select>
  </label>
  {% endif %}
  <label class="flex items-center gap-2 cursor-pointer">
    <input type="checkbox" id="auto-save-toggle"
      class="w-4 h-4 rounded border-rp-border text-rp-primary focus:ring-2 focus:ring-rp-primary/50 cursor-pointer"
      checked />
    <span class="text-sm font-medium text-rp-text whitespace-nowrap">Auto-save</span>
  </label>
</div>
{% endmacro %}

{% macro preview_button(text="Preview", icon=true) %}
<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
    d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
</svg>
{% endmacro %}

{% macro external_link_icon() %}
<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
    d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
</svg>
{% endmacro %}

{% macro save_icon() %}
<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
</svg>
{% endmacro %}

{% macro cancel_icon() %}
<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
</svg>
{% endmacro %}

{% macro create_icon() %}
<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" />
</svg>
{% endmacro %}

{% macro publish_icon() %}
<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 11l5-5m0 0l5 5m-5-5v12" />
</svg>
{% endmacro %}

{% macro delete_icon() %}
<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
    d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
</svg>
{% endmacro %}

{% macro search_icon() %}
<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
    d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
</svg>
{% endmacro %}

{% macro close_icon() %}
<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
</svg>
{% endmacro %}

{% macro edit_icon() %}
<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
    d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
</svg>
{% endmacro %}

{% macro view_icon() %}
<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
    d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
</svg>
{% endmacro %}

{% macro post_icon(class="w-6 h-6") %}
<svg class="{{ class }}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
    d="M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z" />
</svg>
{% endmacro %}

{% macro page_icon(class="w-6 h-6") %}
<svg class="{{ class }}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
    d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
</svg>
{% endmacro %}

{% macro clock_icon() %}
<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
    d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
</svg>
{% endmacro %}

{% macro info_icon() %}
<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
    d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
</svg>
{% endmacro %}

{% macro eye_icon() %}
<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
    d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
</svg>
{% endmacro %}

{% macro expand_icon() %}
<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
    d="M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5v-4m0 4h-4m4 0l-5-5" />
</svg>
{% endmacro %}

{% macro chevron_right_icon() %}
<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
</svg>
{% endmacro %}

{% macro error_banner(msg) %}
<div class="bg-rp-error/10 border border-rp-error/30 rounded-lg px-4 py-3 mb-6">
  <div class="flex items-center gap-3">
    <svg class="w-5 h-5 text-rp-error flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
        d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
    </svg>
    <p class="text-sm text-rp-error">{{ msg }}</p>
  </div>
</div>
{% endmacro %}

{% macro stat_card(border_class, bg_class, text_class, icon_path, count, label) %}
<div class="card p-5 border-l-4 {{ border_class }}">
  <div class="flex items-center gap-3">
    <div class="w-10 h-10 rounded-lg {{ bg_class }} flex items-center justify-center">
      <svg class="w-5 h-5 {{ text_class }}" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="{{ icon_path }}" />
      </svg>
    </div>
    <div>
      <div class="text-2xl font-bold {{ text_class }}">{{ count }}</div>
      <div class="text-rp-muted text-sm">{{ label }}</div>
    </div>
  </div>
</div>
{% endmacro %}

{% macro empty_state(icon_path, message, link_href, link_text) %}
<div class="p-12 text-center">
  <div class="inline-flex items-center justify-center w-16 h-16 rounded-full bg-rp-tertiary/10 mb-4">
    <svg class="w-8 h-8 text-rp-tertiary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="{{ icon_path }}" />
    </svg>
  </div>
  <p class="text-rp-muted mb-4">{{ message }}</p>
  <a href="{{ link_href }}" class="text-rp-tertiary hover:underline font-medium">{{ link_text }}</a>
</div>
{% endmacro %}

{% macro live_preview_header() %}
<div class="flex items-center justify-between mb-3">
  <h3 class="text-sm font-medium flex items-center gap-2">
    <svg class="w-4 h-4 text-rp-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
        d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
    </svg>
    Live Preview
  </h3>
  <span id="auto-save-badge"
    class="px-2 py-0.5 rounded-full text-xs bg-rp-secondary/10 text-rp-secondary">Auto-save</span>
</div>
{% endmacro %}

{% macro content_list_item(id, title, slug, status, url_prefix, icon_path, owner_user_id, authors) %}
<li class="group p-5 flex items-center justify-between hover:bg-rp-tertiary/5 transition-colors cursor-pointer"
  onclick="window.location='/admin/edit/{{ id }}'">
  <div class="flex items-center gap-4 flex-1">
    <div
      class="w-12 h-12 rounded-xl flex items-center justify-center group-hover:scale-105 transition-transform bg-rp-tertiary/10">
      <svg class="w-6 h-6 text-rp-tertiary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="{{ icon_path }}" />
      </svg>
    </div>
    <div>
      <span class="font-semibold text-rp-text group-hover:text-rp-tertiary transition-colors">{{ title }}</span>
      <p class="text-rp-muted text-sm mt-0.5">{{ url_prefix }}{{ slug }}
        {% if let Some(oid) = owner_user_id %}
        {% if let Some(email) = authors.get(&oid) %}
        <span class="ml-2">by {{ email }}</span>
        {% endif %}
        {% endif %}
      </p>
    </div>
  </div>
  <div class="flex items-center gap-3">
    <span class="px-3 py-1 rounded-full text-xs font-medium {% if status.as_str() == " published" %}bg-rp-secondary/10
      text-rp-secondary{% else %}bg-rp-tertiary/10 text-rp-tertiary{% endif %}">{{ status }}</span>
    <a href="/admin/edit/{{ id }}" class="p-2 rounded-lg hover:bg-rp-border/50 transition-colors text-rp-muted"
      title="Edit" onclick="event.stopPropagation()">
      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
          d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
      </svg>
    </a>
    {% if status.as_str() == "published" %}
    <a href="{{ url_prefix }}{{ slug }}" target="_blank"
      class="p-2 rounded-lg hover:bg-rp-border/50 transition-colors text-rp-muted" title="View"
      onclick="event.stopPropagation()">
      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
          d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
      </svg>
    </a>
    {% endif %}
  </div>
</li>
{% endmacro %}